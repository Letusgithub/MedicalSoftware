<%- include('../partials/headercode.ejs') %>
    <!-- Atharv -->

    <body>

        <!-- Layout wrapper -->
        <div class="layout-wrapper layout-content-navbar  ">
            <div class="layout-container">

                <!-- sidebar imported -->
                <%- include('../partials/sidebar.ejs') %>

                    <!-- Layout container -->
                    <div class="layout-page">

                        <!-- navbar imported -->
                        <%- include('../partials/navbar.ejs') %>

                            <!-- Content wrapper -->
                            <div class="content-wrapper">

                                <!-- Content -->

                                <div class="container-xxl flex-grow-1 container-p-y">


                                    <div class="d-flex justify-content-between m-0 p-0">
                                        <h4 class="fw-bold py-3 mb-1"> Update Product</h4>
                                        <button type="button" class="btn btn-icon btn-danger my-2 mx-3"
                                            onclick="history.back()">
                                            <i class='bx bx-x bx-sm'></i>
                                        </button>
                                    </div>
                                    <hr class="mb-4">

                                    <div class="card mb-4 mx-auto col-md-8">
                                        <!-- <form> -->
                                            <div class="card-body ">

                                                <div class="row mb-3">
                                                    <label class="col-sm-2 col-form-label"
                                                        for="basic-icon-default-fullname">Product Name</label>
                                                    <div class="col-sm-10">
                                                        <div class="input-group input-group-merge">
                                                            <span id="basic-icon-default-fullname2"
                                                                class="input-group-text"></span>
                                                            <input type="text" class="form-control"
                                                                id="basic-icon-default-fullname" placeholder=""
                                                                aria-label="John Doe"
                                                                aria-describedby="basic-icon-default-fullname2"
                                                                name="productname"
                                                                value="<%=data[0].med_name%>"
                                                                disabled
                                                                >
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="row mb-3">
                                                    <label class="col-sm-2 col-form-label"
                                                        for="basic-icon-default-fullname">Mfg/Mkt</label>
                                                    <div class="col-sm-10">
                                                        <div class="input-group input-group-merge">
                                                            <span id="basic-icon-default-fullname2"
                                                                class="input-group-text"></span>
                                                            <input type="text" class="form-control"
                                                                id="basic-icon-default-fullname" placeholder=""
                                                                aria-label="John Doe"
                                                                aria-describedby="basic-icon-default-fullname2"
                                                                name="brand"
                                                                value="<%= data[0]['mfd/mkt']%>"
                                                                disabled
                                                                >
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="row mb-3">
                                                    <label class="col-sm-2 col-form-label"
                                                        for="basic-icon-default-fullname">Salt Comp.</label>
                                                    <div class="col-sm-10">
                                                        <div class="input-group input-group-merge">
                                                            <span id="basic-icon-default-fullname2"
                                                                class="input-group-text"></span>
                                                            <input type="text" class="form-control"
                                                                id="basic-icon-default-fullname" placeholder=""
                                                                aria-label="John Doe"
                                                                aria-describedby="basic-icon-default-fullname2"
                                                                name="salt"
                                                                value="<%=data[0].salt_composition%>"
                                                                disabled>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="row mb-3">

                                                    <label class="col-sm-2 col-form-label"
                                                        for="basic-icon-default-companyname">GST (%)</label>
                                                    <div class="col-sm-4">
                                                        <div class="input-group input-group-merge">
                                                            <span id="basic-icon-default-companyname2"
                                                                class="input-group-text"></span>
                                                            <input type="text" class="form-control"
                                                                id="basic-icon-default-companyname" placeholder=""
                                                                aria-label="John Doe"
                                                                aria-describedby="basic-icon-default-companyname2"
                                                                name="gst"
                                                                value="<%=data[0].gst%>">
                                                        </div>
                                                    </div>



                                                    <label class="col-sm-2 col-form-label ps-4"
                                                        for="basic-icon-default-companyname">HSN Code</label>
                                                    <div class="col-sm-4">
                                                        <div class="input-group input-group-merge">
                                                            <span id="basic-icon-default-companyname2"
                                                                class="input-group-text"></span>
                                                            <input type="text" class="form-control"
                                                                id="basic-icon-default-companyname" placeholder=""
                                                                aria-label="John Doe"
                                                                aria-describedby="basic-icon-default-companyname2"
                                                                name="hsn"
                                                                value="<%=data[0].hsn%>">
                                                        </div>
                                                    </div>


                                                </div>


                                                <!-- <div class="row mb-2">
                                                    <label class="col-sm-2 col-form-label"
                                                        for="basic-icon-default-address">Unit</label>
                                                    <div class="col-sm-4 me-0">
                                                        <div class="input-group input-group-merge">
                                                            <select class="form-select" id="exampleFormControlSelect1" name="primary"
                                                                aria-label="Default select example">
                                                                <option selected><%=data[0].primary_unit%></option>
                                                                <option value="1">Stp</option>
                                                                <option value="1">AMP (Ampoules)</option>
                                                                <option value="1">Box</option>
                                                                <option value="1">BTL (Bottle)</option>
                                                                <option value="1">BALM</option>
                                                                <option value="1">CAP (Capsule)</option>
                                                                <option value="1">CREAM</option>
                                                                <option value="1">DROP</option>
                                                                <option value="1">DRSP (Dry Syrup)</option>
                                                                <option value="1">E/D (Eye Drop)</option>
                                                                <option value="1">EAR/D (Ear Drop)</option>
                                                                <option value="1">FW (Face Wash)</option>
                                                                <option value="1">GEL</option>
                                                                <option value="1">GM</option>
                                                                <option value="1">INJ (Injection)</option>
                                                                <option value="1">INH (Inhaler)</option>
                                                            </select>
                                                        </div>

                                                    </div>

                                                    <div class="col-sm-1 text-center mx-0 p-0">
                                                        <p class="fs-4">-</p>
                                                    </div>

                                                    <div class="col-sm-4 ms-0">
                                                        <div class="input-group input-group-merge">
                                                            <select class="form-select" id="exampleFormControlSelect1" name="secondary"
                                                            disabled
                                                                aria-label="Default select example">
                                                                <option selected><%=data[0].secondary_unit %></option>
                                                                <option value="1">Tbl</option>
                                                                <option value="1">AMP (Ampoules)</option>
                                                                <option value="1">Box</option>
                                                                <option value="1">BTL (Bottle)</option>
                                                                <option value="1">BALM</option>
                                                                <option value="1">CAP (Capsule)</option>
                                                                <option value="1">CREAM</option>
                                                                <option value="1">DROP</option>
                                                                <option value="1">DRSP (Dry Syrup)</option>
                                                                <option value="1">E/D (Eye Drop)</option>
                                                                <option value="1">EAR/D (Ear Drop)</option>
                                                                <option value="1">FW (Face Wash)</option>
                                                                <option value="1">GEL</option>
                                                                <option value="1">GM</option>
                                                                <option value="1">INJ (Injection)</option>
                                                                <option value="1">INH (Inhaler)</option>
                                                                <option value="1"></option>
                                                                <option value="1"></option>

                                                            </select>
                                                        </div>

                                                    </div>
                                                </div> -->

                                                <!-- <div class="row mb-3">

                                                    <label class="col-sm-2 col-form-label"
                                                        for="basic-icon-default-companyname">Conversion</label>

                                                    <div class="col-sm-4">
                                                        <div class="input-group input-group-merge">
                                                            <span class="input-group-text" id="primarypopulate"><%=data[0].primary_unit %></span>
                                                            <span class="input-group-text">=</span>
                                                            <input type="number" class="form-control" placeholder=""
                                                                aria-label="" name="conversion" value="<%=data[0].conversion%>"/>
                                                            <span class="input-group-text" id="secondarypopulate"><%=data[0].secondary_unit %></span>
                                                        </div>
                                                    </div>

                                                </div> -->

                                                <div class="row mb-3">

                                                    <!-- <label class="col-sm-2 col-form-label"
                                                        for="basic-icon-default-companyname">Shelf Label</label>

                                                    <div class="col-sm-4">
                                                        <div class="input-group input-group-merge">
                                                            <span id="basic-icon-default-companyname2"
                                                                class="input-group-text"></span>
                                                            <input type="text" class="form-control"
                                                                id="basic-icon-default-companyname" placeholder=""
                                                                aria-label="John Doe"
                                                                aria-describedby="basic-icon-default-companyname2"
                                                                name="shelflabel">
                                                        </div>
                                                    </div> -->

                                                    <label class="col-sm-2 col-form-label ps-4"
                                                        for="basic-icon-default-companyname">Threshold</label>

                                                    <div class="col-sm-4">
                                                        <div class="input-group input-group-merge">
                                                            <span id="basic-icon-default-companyname2"
                                                                class="input-group-text"></span>
                                                            <input type="text" class="form-control"
                                                                id="basic-icon-default-companyname" placeholder=""
                                                                aria-label="John Doe"
                                                                aria-describedby="basic-icon-default-companyname2"
                                                                name="threshold"
                                                                value="<%=data[0].threshold%>">
                                                        </div>
                                                    </div>

                                                    
                                                </div>
                                                <div class="text-center mx-auto">
                                                    <button type="submit" class="btn btn-primary" id="submitproduct">Update</button>
                                                </div>
                                            </div>

                                        <!-- </form> -->
                                    </div>


                                </div>
                                <!-- / Content -->

                                <div class="content-backdrop fade"></div>
                            </div>
                            <!-- Content wrapper -->
                    </div>
                    <!-- / Layout page -->
            </div>



            <!-- Overlay -->
            <div class="layout-overlay layout-menu-toggle"></div>


        </div>
        <!-- / Layout wrapper -->

        <%- include('../partials/footercode.ejs') %>
        <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.js"></script>
        <script>
            $(document).ready(function(){
                productId = '<%=data[0].product_id%>';
                orgID = '<%=orgId%>';
                $("#submitproduct").click(function(){
                    var productDetails ={
                         product_id: productId,
                         org_id: orgID,
                         gst : $("input[name='gst']").val(),
                         hsn : $("input[name='hsn']").val(),
                         threshold: $("input[name='threshold']").val()
                    }
                    console.log(productDetails);
                    $.ajax({
                        url: `/api/updateinventory/${productId}`,
                        type: 'POST',
                        data: JSON.stringify(productDetails),
                        contentType: 'application/json',
                        success: function(response){
                            console.log('inside stock', response);
                            window.location.href='/product_stock'                  
                        },
                        error: function(error){
                            console.log(error);
                        }
                    })
                })
            })
        </script>
        
            

    </body>


    </html>